const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ByU5objh.js","./qU05_D8R.js","./entry.B98tm_tc.css","./DBAcl7t7.js"])))=>i.map(i=>d[i]);
import{y as B,aU as F,b as H}from"./qU05_D8R.js";import{t as P,b as M}from"./DBAcl7t7.js";const q=/\d/,Q=["-","_","/","."];function G(t=""){if(!q.test(t))return t!==t.toLowerCase()}function _(t,i){const e=Q,n=[];if(!t||typeof t!="string")return n;let s="",r,o;for(const c of t){const l=e.includes(c);if(l===!0){n.push(s),s="",r=void 0;continue}const a=G(c);if(o===!1){if(r===!1&&a===!0){n.push(s),s=c,r=a;continue}if(r===!0&&a===!1&&s.length>1){const u=s.at(-1);n.push(s.slice(0,Math.max(0,s.length-1))),s=u+c,r=a;continue}}s+=c,r=a,o=l}return n.push(s),n}function V(t){return t?t[0].toUpperCase()+t.slice(1):""}function K(t,i){return t?(Array.isArray(t)?t:_(t)).map(e=>V(i?.normalize?e.toLowerCase():e)).join(""):""}function at(t,i){return t?(Array.isArray(t)?t:_(t)).map(e=>e.toLowerCase()).join("-"):""}function ct(t){return{type:"minimark",value:t.children.map(U).filter(i=>i!==void 0)}}function U(t){if(t.type!=="comment")return t.type==="text"?t.value:(t.tag==="code"&&t.props?.className&&t.props.className.length===0&&delete t.props.className,[t.tag,t.props||{},...(t.children||[]).map(U).filter(i=>i!==void 0)])}function Y(t){return{type:"root",children:t.value.map(D)}}function D(t){if(typeof t=="string")return{type:"text",value:t};const[i,e,...n]=t;return{type:"element",tag:i,props:e,children:n.map(D)}}const C=(t,i)=>{const e=t._conditions;return e.length>0?`(${e.join(` ${i} `)})`:""},N=t=>{const i=[],e={_conditions:i,where(n,s,r){let o;switch(s.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(r)){const c=r.map(l=>y(l)).join(", ");o=`"${String(n)}" ${s.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${s} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(r)&&r.length===2)o=`"${String(n)}" ${s.toUpperCase()} ${y(r[0])} AND ${y(r[1])}`;else throw new Error(`Value for ${s} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(n)}" ${s.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(n)}" ${s.toUpperCase()} ${y(r)}`;break;default:o=`"${String(n)}" ${s} ${y(typeof r=="boolean"?Number(r):r)}`}return i.push(`${o}`),e},andWhere(n){const s=n(N());return i.push(C(s,"AND")),e},orWhere(n){const s=n(N());return i.push(C(s,"OR")),e}};return e},z=(t,i)=>{const e={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},n={__params:e,andWhere(r){const o=r(N());return e.conditions.push(C(o,"AND")),n},orWhere(r){const o=r(N());return e.conditions.push(C(o,"OR")),n},path(r){return n.where("path","=",B(r))},skip(r){return e.offset=r,n},where(r,o,c){return n.andWhere(l=>l.where(String(r),o,c)),n},limit(r){return e.limit=r,n},select(...r){return r.length&&e.selectedFields.push(...r),n},order(r,o){return e.orderBy.push(`"${String(r)}" ${o}`),n},async all(){return i(t,s()).then(r=>r||[])},async first(){return i(t,s({limit:1})).then(r=>r[0]||null)},async count(r="*",o=!1){return i(t,s({count:{field:String(r),distinct:o}})).then(c=>c[0].count)}};function s(r={}){let o="SELECT ";if(r?.count)o+=`COUNT(${r.count.distinct?"DISTINCT ":""}${r.count.field}) as count`;else{const l=Array.from(new Set(e.selectedFields));o+=l.length>0?l.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${P[String(t)]}`,e.conditions.length>0&&(o+=` WHERE ${e.conditions.join(" AND ")}`),e.orderBy.length>0?o+=` ORDER BY ${e.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const c=r?.limit||e.limit;return c>0&&(e.offset>0?o+=` LIMIT ${c} OFFSET ${e.offset}`:o+=` LIMIT ${c}`),o}return n};function y(t){return`'${String(t).replace(/'/g,"''")}'`}function A(t){return i=>(i=i||{},(t||[]).filter(e=>typeof i[e]<"u").reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{}))}async function W(t,i=[]){t.__params?.orderBy?.length||(t=t.order("stem","ASC"));const n=await t.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...i||[]).all(),{contents:s,configs:r}=n.reduce((a,u)=>{if(String(u.stem).split("/").pop()===".navigation"){u.title=u.title?.toLowerCase()==="navigation"?"":u.title;const d=u.path.split("/").slice(0,-1).join("/")||"/";a.configs[d]={...u,...u.body}}else a.contents.push(u);return a},{configs:{},contents:[]}),o=a=>({...A(["title",...i])(a),...a.meta,...j(a?.navigation)?a.navigation:{}}),c=a=>({...A(["title",...i])(a),...j(a?.navigation)?a.navigation:{}}),l=s.reduce((a,u)=>{const d=u.path.substring(1).split("/"),g=u.stem.split("/"),S=!!g[g.length-1]?.match(/([1-9]\d*\.)?index/g),p=f=>({title:f.title,path:f.path,stem:f.stem,children:[],...c(f)}),h=p(u);if(S){const f=r[h.path];if(typeof f?.navigation<"u"&&f?.navigation===!1)return a;if(u.path!=="/"){const m=p(u);h.children.push(m)}f&&Object.assign(h,o(f))}if(d.length===1){const f=a.find(m=>m.path===h.path&&m.page===!1);return S&&f?Object.assign(f,{page:void 0,children:[...h.children||[],...f.children||[]]}):a.push(h),a}const L=d.slice(0,-1).reduce((f,m,O)=>{const I="/"+d.slice(0,O+1).join("/"),b=r[I];if(typeof b?.navigation<"u"&&b.navigation===!1)return[];let v=f.find($=>$.path===I);if(!v){const $=b?o(b):{};v={...$,title:$.title||J(m),path:I,stem:g.slice(0,O+1).join("/"),children:[],page:!1},f.push(v)}return v.children},a),w=L.find(f=>f.path===h.path&&f.page===!1);return w?Object.assign(w,{...h,page:void 0,children:[...h.children||[],...w.children||[]]}):L.push(h),a},[]);return R(l)}function R(t){const i=t;for(const e of i)e.children?.length?R(e.children):delete e.children;return t}function j(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}const J=t=>t.split(/[\s-]/g).map(K).join(" ");async function X(t,i,e){const{before:n=1,after:s=1,fields:r=[]}=e||{},o=await W(t,r),c=k(o),l=c.findIndex(d=>d.path===i),a=l===-1?[]:c.slice(l-n,l),u=l===-1?[]:c.slice(l+1,l+s+1);return[...Array.from({length:n}).fill(null).concat(a).slice(a.length),...u.concat(Array.from({length:s}).fill(null)).slice(0,s)]}function k(t){return t.flatMap(e=>{const n=e.children?k(e.children):[];return e.page===!1||n.length&&n.find(s=>s.path===e.path)?n:[{...e,children:void 0},...n]})}const Z=/^h([1-6])$/,T=t=>Number(t.match(Z)?.[1]??0);async function tt(t,i){const{ignoredTags:e=[],extraFields:n=[],minHeading:s="h1",maxHeading:r="h6"}=i||{},o=T(s),c=T(r);return(await t.where("extension","=","md").select("path","body","description","title",...n||[]).all()).flatMap(a=>et(a,{ignoredTags:e,extraFields:n,minLevel:o,maxLevel:c}))}function et(t,{ignoredTags:i,extraFields:e,minLevel:n,maxLevel:s}){const r=!t.body||t.body?.type==="root"?t.body:Y(t.body),o=t.path??"",c=A(e)(t),l=[{...c,id:o,title:t.title||"",titles:[],content:(t.description||"").trim(),level:1}];if(!r?.children)return l;let a=1,u=0;const d=[t.title??""];for(const g of r.children){const S=g.tag||"",p=T(S);if(p>=n&&p<=s){const h=E(g).trim();p===1?d.splice(0,d.length):p<u?d.splice(p-1,d.length-1):p===u&&d.pop(),l.push({...c,id:`${o}#${g.props?.id}`,title:h,titles:[...d],content:"",level:p}),d.push(h),u=p,a+=1}else{const h=E(g,i).trim();if(a===1&&l[a-1]?.content===h)continue;l[a-1].content=`${l[a-1].content} ${h}`.trim()}}return l}function E(t,i=[]){let e="";return t.type==="text"&&(e+=t.value||""),i.includes(t.tag??"")?"":(t.children?.length&&(e+=t.children.map(n=>E(n,i)).filter(Boolean).join("")),e)}const nt=t=>{const i=F()?.ssrContext?.event;return z(t,(e,n)=>rt(i,e,n))};function lt(t,i){return x(t,e=>W(e,i))}function ut(t,i,e){return x(t,n=>X(n,i,e))}function ft(t,i){return x(t,e=>tt(e,i))}async function rt(t,i,e){return window.WebAssembly?it(i,e):M(t,String(i),e)}async function it(t,i){return await H(()=>import("./ByU5objh.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(n=>n.loadDatabaseAdapter(t)).then(n=>n.all(i))}function x(t,i){const e=nt(t),n={where(s,r,o){return e.where(String(s),r,o),n},andWhere(s){return e.andWhere(s),n},orWhere(s){return e.orWhere(s),n},order(s,r){return e.order(String(s),r),n},then(s,r){return i(e).then(s,r)},catch(s){return this.then(void 0,s)},finally(s){return this.then(void 0,void 0).finally(s)},get[Symbol.toStringTag](){return"Promise"}};return n}export{lt as a,ut as b,nt as c,ct as f,at as k,K as p,ft as q,Y as t};
